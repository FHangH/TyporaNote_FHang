# C++职工管理系统



### 1. 管理系统需求



系统需求：

- 职工管理系统可以用来管理公司内所有员工的信息
- 公司职工分三类：普通员工，经理，老板；
- 显示员工信息：显示职工编号，职工姓名，职工岗位
- 职责：
  - 普通员工职责：完成经理的任务
  - 经理职责：完成老板的任务
  - 老板：管理所有事务

管理系统需要的功能：

- 退出管理程序：退出当前管理系统
- 增加职工信息：实现批量添加职工功能，将信息录入到文件中，职工信息为：职工编号，姓名，部门编号
- 显示职工信息：显示公司内部所有职工的信息
- 删除离职职工：按照编号删除指定的职工
- 修改职工信息：按照编号修改职工个人信息
- 查找职工信息：按照职工的编号或者职工的姓名进行查找相关人员信息
- 按照编号排序：按照职工编号，进行排序，排序规则由用户指定
- 清空所有文档：清空文件中记录的所有职工信息（清空前需要确认，防止误删）



### 2. 创建管理类



- 管理类的内容：
  - 用户的沟通菜单界面
  - 对职工增删改查的操作
  - 与文件的读写交互



#### 2.1 创建文件

- Clion中创建
  - 头文件：`workerManager.h`
  - 源文件：`workerManager.cpp`
  - 主文件：`StaffManagerSystem_Main.cpp`
  - `CMakeList.txt`



#### 2.2 创建管理类文件

- `CMakeList.txt`

  ```txt
  cmake_minimum_required(VERSION 3.19)
  project(StaffManagementSystem)
  
  set(CMAKE_CXX_STANDARD 14)
  
  add_executable(StaffManagementSystem StaffManagerSystem_Main.cpp workerManager.h workerManager.cpp)
  ```

- `workerManager.h`

  ```c++
  //
  // Created by Admin on 2021/6/26.
  //
  
  #ifndef STAFFMANAGEMENTSYSTEM_WORKERMANAGER_H
  #define STAFFMANAGEMENTSYSTEM_WORKERMANAGER_H
  
  #include <iostream>
  
  using namespace std;
  
  class WorkerManager
  {
  public:
      WorkerManager();
      ~WorkerManager();
  };
  
  #endif //STAFFMANAGEMENTSYSTEM_WORKERMANAGER_H
  ```

- `workerManager.cpp`

  ```c++
  //
  // Created by Admin on 2021/6/26.
  //
  #include "workerManager.h"
  
  WorkerManager::WorkerManager()
  {
  
  }
  
  WorkerManager::~WorkerManager()
  {
  
  }
  ```

- `StaffManagerSystem_Main.cpp`

  ```c++
  #include <iostream>
  #include "workerManager.h"
  
  int main()
  {
      cout << "Hello, World!" << endl;
      return 0;
  }
  ```

  



### 3. 菜单功能



- 功能描述：与用户沟通的界面



#### 3.1 添加成员函数



- 在`workerManager.h`中的`WorkerManager`类中添加成员函数：`void Show_Menu();`

  ```c++
  //
  // Created by Admin on 2021/6/26.
  //
  
  #ifndef STAFFMANAGEMENTSYSTEM_WORKERMANAGER_H
  #define STAFFMANAGEMENTSYSTEM_WORKERMANAGER_H
  #define wm workerManager
  #include <iostream>
  
  using namespace std;
  
  class WorkerManager
  {
  public:
      WorkerManager();
      ~WorkerManager();
  
      // 显示菜单
      void Show_Menu();
  };
  
  #endif //STAFFMANAGEMENTSYSTEM_WORKERMANAGER_H
  ```



#### 3.2 菜单功能实现



- 在管理类 `workerManager.cpp` 中实现具体 `Show_Menu()` 函数

  ```c++
  void WorkerManager::Show_Menu()
  {
      cout << "======================" << endl;
      cout << "====员工管理系统主菜单====" << endl;
      cout << "=====0.退出管理系统=====" << endl;
      cout << "=====1.增加职工信息=====" << endl;
      cout << "=====2.显示职工信息=====" << endl;
      cout << "=====3.删除离职职工=====" << endl;
      cout << "=====4.修改职工信息=====" << endl;
      cout << "=====5.查找职工信息=====" << endl;
      cout << "=====6.按照编号排序=====" << endl;
      cout << "=====7.清空所有文档=====" << endl;
      cout << "======================" << endl;
      cout << endl;
  }
  ```



#### 3.3 测速菜单功能



- 在`StaffManagerSystem_Main.cpp`中进行测试

  ```c++
  #include <iostream>
  #include "workerManager.h"
  
  int main()
  {
      WorkerManager workerManager;
      wm.Show_Menu();
      return 0;
  }
  ```



### 4. 退出功能



#### 4.1 提供菜单功能接口



- 在main函数中提供分支选择，提供菜单界面每个功能的接口

- 先创建一个`StaffManagerSystem_Main.cpp`中的函数`showMenu(){};`

  ```c++
  #include <iostream>
  #include "workerManager.h"
  
  void showMenu()
  {
          // 初始选择
      int choice = 0;
  
      // 生成 管理界面 对象
      WorkerManager workerManager;
      // 调用 菜单界面
      ReShowMenu:
      wm.Show_Menu();
      cout << "功能选择 >> ";
      cin >> choice;
  
      // 菜单界面的功能选择分支
      switch (choice)
      {
          case 0: // 0.退出管理系统
              wm.exitSystem();
              break;
          case 1: // 1.增加职工信息
              break;
          case 2: // 2.显示职工信息
              break;
          case 3: // 3.删除离职职工
              break;
          case 4: // 4.修改职工信息
              break;
          case 5: // 5.查找职工信息
              break;
          case 6: // 6.按照编号排序
              break;
          case 7: // 7.清空所有文档
              break;
          default: // 0 ~ 7 之外任意值，清空，重来菜单界面
              system("cls");
              goto ReShowMenu;
      }
  }
  
  int main()
  {
      showMenu();
      return 0;
  }
  ```



#### 4.2 实现退出功能



- 在`workerManager.h`中提供退出系统的成员函数 `void exitSystem();`

- 在`workerManager.cpp`中具体实现功能

  ```c++
  // 0.退出管理系统
  void WorkerManager::exitSystem()
  {
      cout << "员工管理系统-退出" << endl;
      exit(0);
  }
  ```



### 5. 创建职工类



#### 5.1 创建职工抽象类



- 职工分类：
  - 普通员工
  - 经理
  - 老板
- 将三种职工抽象到一个类`Worker`中，利用多态管理不同职工类
- 职工的属性：
  - 职工编号
  - 职工姓名
  - 职工部门编号
- 职工行为：
  - 岗位职责信息描述
  - 获取岗位名称

- 创建头文件 `worker.h`

  ```c++
  //
  // Created by Admin on 2021/6/26.
  //
  
  #ifndef STAFFMANAGEMENTSYSTEM_WORKER_H
  #define STAFFMANAGEMENTSYSTEM_WORKER_H
  
  #include <iostream>
  
  using namespace std;
  
  // 职工抽象类
  class Worker
  {
  public:
      int worker_ID; // 职工ID
      string worker_Name; // 职工姓名
      int worker_DepartID; // 职工部门编号
  
      // 获得 职工的信息
      virtual void getWorkerInfo() = 0;
  
      // 获得 职工部门的岗位名称
      virtual void getWorkerDepartName() = 0;
  };
  
  #endif //STAFFMANAGEMENTSYSTEM_WORKER_H
  ```



#### 5.2 创建普通员工类



- 普通员工继承职工抽象类，并重写父类中的纯虚函数
- 在头文件和源文件的文件夹中创建`employee.h`和`employee.cpp`



- `employee.h`

  ```c++
  //
  // Created by Admin on 2021/6/26.
  //
  
  #ifndef STAFFMANAGEMENTSYSTEM_EMPLOYEE_H
  #define STAFFMANAGEMENTSYSTEM_EMPLOYEE_H
  
  #include "worker.h"
  #include <iostream>
  
  using namespace std;
  
  class Employee : public Worker
  {
  public:
      // 初始化 员工 构造函数
      Employee(int w_Id, string w_Name, int w_DepartId);
  
      // 获得员工个人信息
      void getWorkerInfo() override;
  
      // 获得员工部门岗位名称
      void getWorkerDepartName() override;
  };
  
  #endif //STAFFMANAGEMENTSYSTEM_EMPLOYEE_H
  ```

- `employee.cpp`

  ```c++
  //
  // Created by Admin on 2021/6/26.
  //
  #include "../Header/employee.h"
  
  Employee::Employee(int w_Id, string w_Name, int w_DepartId)
  {
      this->worker_ID = w_Id;
      this->worker_Name = w_Name;
      this->worker_DepartID = w_DepartId;
  }
  
  void Employee::getWorkerInfo()
  {
      cout << "职工编号：" << this->worker_ID
           << "\t职工姓名：" << this->worker_Name
           << "\t岗位：" << this->getWorkerDepartName()
           << "\t岗位职责：完成经理的任务" << endl;
  }
  
  string Employee::getWorkerDepartName()
  {
      return string("普通员工");
  }
  ```



#### 5.3 创建经理类



- 经理类继承职工抽象类，并重写父类中虚函数
- 在头文件和源文件文件夹内，创建`manager.h`和`manager.cpp`



- `manager.h`

  ```c++
  //
  // Created by Admin on 2021/6/26.
  //
  
  #ifndef STAFFMANAGEMENTSYSTEM_MANAGER_H
  #define STAFFMANAGEMENTSYSTEM_MANAGER_H
  
  #include "worker.h"
  #include <iostream>
  
  using namespace std;
  
  // 经理类
  class Manager : public Worker
  {
  public:
      // 初始化 经理 构造函数
      Manager(int w_Id, string w_Name, int w_DepartId);
  
      // 获得经理个人信息
      void getWorkerInfo() override;
  
      // 获得经理部门岗位名称
      string getWorkerDepartName() override;
  };
  
  #endif //STAFFMANAGEMENTSYSTEM_MANAGER_H
  ```

- `manager.cpp`

  ```c++
  //
  // Created by Admin on 2021/6/26.
  //
  
  #include "../Header/manager.h"
  
  // 构造函数 初始化 经理 信息
  Manager::Manager(int w_Id, string w_Name, int w_DepartId)
  {
      this->worker_ID = w_Id;
      this->worker_Name = w_Name;
      this->worker_DepartID = w_DepartId;
  }
  
  // 获得 职工信息
  void Manager::getWorkerInfo()
  {
      cout << "职工编号：" << this->worker_ID
           << "\t职工姓名：" << this->worker_Name
           << "\t岗位：" << this->getWorkerDepartName()
           << "\t岗位职责：完成老板的任务" << endl;
  }
  
  // 获得 职工 岗位信息
  string Manager::getWorkerDepartName()
  {
      return string("经理");
  }
  ```



#### 5.4 创建老板类



- 老板类继承职工抽象类，并重写父类中虚函数
- 在头文件和源文件文件夹内，创建`boss.h`和`boss.cpp`



- `boss.h`

  ```c++
  //
  // Created by Admin on 2021/6/26.
  //
  
  #ifndef STAFFMANAGEMENTSYSTEM_BOSS_H
  #define STAFFMANAGEMENTSYSTEM_BOSS_H
  
  #include "worker.h"
  #include <iostream>
  
  using namespace std;
  
  // 老板类
  class Boss : public Worker
  {
  public:
      // 初始化 老板 构造函数
      Boss(int w_Id, string w_Name, int w_DepartId);
  
      // 获得老板个人信息
      void getWorkerInfo() override;
  
      // 获得老板部门岗位名称
      string getWorkerDepartName() override;
  };
  
  #endif //STAFFMANAGEMENTSYSTEM_BOSS_H
  ```

- `boss.cpp`

  ```c++
  //
  // Created by Admin on 2021/6/26.
  //
  
  #include "../Header/boss.h"
  
  // 构造函数 初始化 老板 信息
  Boss::Boss(int w_Id, string w_Name, int w_DepartId)
  {
      this->worker_ID = w_Id;
      this->worker_Name = w_Name;
      this->worker_DepartID = w_DepartId;
  }
  
  // 获得 职工信息
  void Boss::getWorkerInfo()
  {
      cout << "职工编号：" << this->worker_ID
           << "\t职工姓名：" << this->worker_Name
           << "\t岗位：" << this->getWorkerDepartName()
           << "\t岗位职责：管理所有事务" << endl;
  }
  
  // 获得 职工 岗位信息
  string Boss::getWorkerDepartName()
  {
      return string("老板");
  }
  ```



#### 5.5 测试多态



- 在`StaffManagerSystem_Main.cpp`中添加测试函数`void demo(){};`

- 测试代码：

  ```c++
  #include <iostream>
  #include "../Header/workerManager.h"
  #include "../Header/worker.h"
  #include "../Header/employee.h"
  #include "../Header/manager.h"
  #include "../Header/boss.h"
  
  void demo()
  {
      Worker *worker = nullptr;
      
      worker = new Employee(1, "Normal_A", 1);
      worker->getWorkerInfo();
      
      worker = new Manager(2, "Manager_A", 2);
      worker->getWorkerInfo();
      
      worker = new Boss(3, "Boss_A", 3);
      worker->getWorkerInfo();
  }
  
  int main()
  {
      demo();
      return 0;
  }
  ```






### 6. 添加职工



- 功能描述：批次添加职工，并保存到文件中



#### 6.1 功能分析



- 分析：
  1. 用户在批量创建时，可能创建不同种类的职工
  2. 如果想将所有不同种类的职工都放在一个数组中，可以将所有员工的指针维护到一个数租里
  3. 如果想在程序中维护这个不定长度的数组，可以将数组创建到堆区，并利用`Worker **`维护
- 堆区开辟以`Worker`类型的数组：`Worker ** = new Worker*[];`



#### 6.2 功能实现



- 在`WorkerManager.h`添加成员属性

  ```c++
      // 记录文件中的人数
      int worker_EmpNum;
  
      // 员工数组指针
      Worker ** worker_EmpArray;
  ```



- 在`WorkerManager.cpp`中构造函数初始化属性

  ```c++
  WorkerManager::WorkerManager()
  {
      // 初始化人数
      this->worker_EmpNum = 0;
  
      // 初始化数组指针
      this->worker_EmpArray = nullptr;
  }
  ```



- 在`WorkerManager.h`添加成员函数

  ```c++
      // 1.增加职工信息
      void addEmployee();
  ```



- 在`WorkerManager.cpp`中实现`void addEmployee(){}`

  ```c++
  // 1.增加职工信息
  void WorkerManager::addEmployee()
  {
      cout << "输入增加职工数量：>>";
      int addNum = 0;
      cin >> addNum;
  
      if (addNum > 0)
      {
          // 计算需要的空间大小 = 已用的空间 + 新需要的空间
          int newSize = this->worker_EmpNum + addNum;
          worker_EmpNum = sizeof(this->worker_EmpArray);
  
          // 在 堆区中开辟 计算好大小的内存空间
          Worker **newSpace = new Worker *[newSize];
  
          // 将已有空间的内容存在新的内村空间中
          if (this->worker_EmpArray != nullptr)
          {
              for (int i = 0; i < this->worker_EmpNum; i++)
              {
                  newSpace[i] = this->worker_EmpArray[i];
              }
          }
  
          // 再将 需要添加的新内容加入
          for (int j = 0; j < addNum; j++)
          {
              int worker_ID; // 职工ID
              string worker_Name; // 职工姓名
              int worker_DepartID; // 职工部门编号
  
              cout << "输入第" << j + 1 << "位员工信息:" << endl;
              cout << "职工编号>>";
              cin >> worker_ID;
  
              cout << "职工姓名>>";
              cin >> worker_Name;
  
              cout << "职工岗位_ 1.员工_2.经理_3.老板>>";
              cin >> worker_DepartID;
  
              Worker *worker = nullptr;
  
              switch (worker_DepartID)
              {
                  case 1:
                      worker = new Employee(worker_ID, worker_Name, 1);
                      break;
                  case 2:
                      worker = new Manager(worker_ID, worker_Name, 2);
                      break;
                  case 3:
                      worker = new Boss(worker_ID, worker_Name, 3);
                      break;
                  default:
                      break;
              }
  
              newSpace[this->worker_EmpNum + j] = worker;
  
              // 释放原本的空间
              delete[] this->worker_EmpArray;
  
              // 更改新空间的执向
              this->worker_EmpArray = newSpace;
  
              // 更新 新的个数
              this->worker_EmpNum = newSize;
  
              // 提示信息
              cout << "添加成功" << addNum << "名新职工" << endl;
          }
      }
      else
      {
          cout << "需输入正确的数字" << endl;
      }
  
      system("cls");
  }
  ```

  